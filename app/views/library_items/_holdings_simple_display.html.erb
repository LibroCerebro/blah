<% if @library_item.holdings_records_collection.empty? %>
  <p class="no-holdings"><i title="Check with the Library" id="icon-holding-available" class="icon-asterisk icon-white"> </i>&nbsp;<%= t('blah.item.holdings.no_holdings_information') %></p>
<% else %>
  <h4>Location</h4>
  <% if !@library_item.nil? && @library_item.inter_library_loan? %>
    <p>Available through <%= link_to "Inter-Library Loan", inter_library_loan_url %></p>
  <% end %>
  <dl class="defList"> 
    <% @library_item.holdings_records_collection.sort!{ |x,y| x.availability <=> y.availability }%>
    <% @library_item.holdings_records_collection.each_with_index do |holding_record, index| %>
      <dt></dt>
      <dd>
        <small>
          <% if index > 20 %>
            <i title="More available" id="icon-holding-more" class="icon-plus icon-white"></i><%= link_to "View record", catalog_path(@library_item.bib_no) %> to check for more items
            <% break %>
          <% else %>
              <% # Set available to true if availability is 'available' else false... %>
              <%  holding_record.availability.downcase =~ /available/ ? available = true : available = false %>
              <% if available then %>
                <i title="Available" id="icon-holding-available" class="icon-ok icon-white"> </i> &nbsp; 
              <% else %>
                <i title="Not available" id="icon-holding-unavailable" class="icon-remove icon-white"></i>&nbsp; <%= holding_record.availability %> &nbsp; 
              <% end %>
              <% # Display the local location (class number) only if it is available %>
              <%= holding_record.local_location %>&nbsp;<%= "- #{ holding_record.call_number }" if available  %>
          <% end %>
        </small>
      </dd>
    <% end %>
  </dl>
<% end %>
